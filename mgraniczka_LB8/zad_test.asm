$ NOMOD51
$ INCLUDE (8051_mgraniczka.MCU)
CSKB0 EQU 0FF21h
CSKB1 EQU 0FF22h
CSDS EQU 0FF30h
CSDB EQU 0FF38h

ORG 0000h
_RESET:
	LJMP _INIT

ORG 0100h
_INIT:
	CLR _WYSW
_LOOP:
	MOV A,#00000001b
	MOV R1,#CSDS
	MOVX @R1,A
	MOV R0,#CSKB0
	MOVX A,@R0
	CPL A
_IF:	
	CJNE A,#00000001b,_ELSE
	MOV R1,#CSDB
	MOVX @R1,A
	LJMP _LOOP
_ELSE:
	MOV R1,#CSDB
	MOV A,#0d
	MOVX @R1,A
	LJMP _LOOP
END