CSDB16 EQU 0FF38h
CSDS16 EQU 0FF30h

ORG 0000h
_RESET:
	LJMP _INIT

ORG 0Bh
_INT_T0:
	INC R0
_IF1:
	CJNE R0,#20,_ELSE1	
_IF2:
	CJNE A,#00000001b,_ELSE2
	MOV A,#00100000b
	MOVX @DPTR,A
	MOV R0,#0
	MOV TL0,#11111111b
	MOV TH0,#01001011b
	RETI
_ELSE2:
	DIV AB
	MOVX @DPTR,A
	MOV R0,#0
	MOV TL0,#11111111b
	MOV TH0,#01001011b
	RETI
_ELSE1:
	RETI	

ORG 0100h
_INIT:
	CLR P1.6
	MOV B,#2
	MOV R0,#0
	MOV TL0,#11111111b
	MOV TH0,#01001011b
	ANL TCON,#11001111b
	ANL TMOD,#11110001b
	ORL TMOD,#00000001b
	ORL IE,#10000010b
	ORL TCON,#00010000b
	
	MOV DPTR,#CSDS16
	MOV A,#00111111b
	MOVX @DPTR,A

	MOV DPTR,#CSDB16
	MOV A,#00100000b
	MOVX @DPTR,A
_LOOP:
	NOP
	LJMP _LOOP
END